# Http协议



******



> 协议：协议就是一套标准，由其他人或者其他组织指定的标准。
>
> ​			 两个计算机之间为了能够流畅的进行沟通而设置的一个君子协定，常见的协议有TCP/IP协议，SOAP协议，HTTP协议，SMTP协议等

## HTTP协议

​	http协议：Hyper Text Transfer Protocol**(超文本传输协议)**的缩写，是用于万维网服务器传输超文本到本地浏览器的传送协议。就是浏览器和服务器之间的数据交互遵守的就是HTTP协议

- 由W3C指定的超文本传输协议
- 这种协议游走在B和S之间，B向S发送协议要遵循Http协议，S向B发送也要遵循Http协议，这样B和S才能解耦合
- 解耦合：
  - B不依赖S
  - S不依赖B

> HTTP协议一共分为三大块内容，无论是请求还是相应都是三块内容
>
> 请求：B ————>  S
>
> ​	请求行 -> 请求方式（get和post） 请求url地址 协议
>
> ​	请求头 （Request Header）-> 放一些服务器要使用的附加信息
>
> ​	空白行：分割请求头和请求体
>
> ​	请求体 -> 一般放一些请求参数
>
> ```xml
> 请求行：
> - 包括三部分
> 	- 请求方式 (7种)
> 		- post（常用）
> 		- get （常用）
> 		- delete
>  		- put	
> 		- head
> 		- options
> 		- trace
> 	- URI
> 		- 统一资源标识符  代表网络中某个资源的标识符，但是通过URI无法定位资源
> 		- 什么是URL  统一资源定位符 代表网络资源中的某个资源，通过URL可以定位到资源
> 		- URI和URL有什么关系？
> 			- URL包括URI  
> 			- URL：http://localhost:8080/httpservlet/index.html
> 			- URI：/httpservlet/index.html
> 	- HTTP版本号
> 		- 协议版本号 （HTTP1）
> ```
>
> 
>
> 响应：S ————>  B
>
> ​	状态行 -> 协议 状态码
>
> ​	响应头（Response Header） -> 放一些客户端要使用的一些附加信息
>
> ​	空白行：分割响应头和响应体
>
> ​	响应体 -> 服务器返回的真正客户端要用内容（HTML，json）被浏览器解释执行并最终展示到浏览器上的内容
>
> ```java
> 状态行：
>     - 由三部分组成，
>     - 1.协议版本号  （HTTP1.1）
>     - 第二部分 状态码（HTTP中规定的响应状态号。不同的响应状态对应不同的号码）
>     - 第三部分 状态的描述信息
>     	- ok 表示正常成功结束
>     	- not found 表示资源找不到
> ```
>
> 

## 		请求头中最常见的一些重要内容

> User-Agent : 请求载体的身份标识（用啥发送的请求）
>
> Referet: 防盗链（这次请求是从那个页面来的，反爬会用到）
>
> cookie: 本地字符串中的数据用户信息（用户登录信息，反爬的token）

## 响应头中的一些重要内容

> cookie: 本地字符串中的数据用户信息（用户登录信息，反爬的token）
>
> 各种神奇的莫名其妙的字符串，一般都是token字符串

## 状态响应码

- 200 表示请求响应成功，正常结束
- 404 表示访问的资源不存在，通常是因为要么是写错了路径，要么是路径写正确了，但是服务器中的资源并没有启动成功，404错误是前端错误
- 405 表示前端发送的请求方式与后端请求的处理方式不一致时发生：
  - 比如：前端是post请求，后端的处理方式是按照get方式处理，发生405
  - 比如：前端是get请求，后端的处理方式是按照post方式处理，发生405
- 500 表示服务器端的程序出现了异常，一般是认为服务器端的错误导致的
- 以4开始的，一般是浏览器端的错误导致的
- 以5开始的，一般是服务器端的错误导致的

## 请求方式（get和post）

> GET: 显示提交，携带请求参数在url中
>
> POST：隐式提交，不携带请求参数
>
> GET和POST的区别：
>
> - get请求会把发送的数据挂在URL的后面，在URL加？后面跟数据，导致发送的数据回显在浏览器的地址栏上
> - post不会回显，在请求体中发送数据，不会再URL上看到数据
>
> 在W3C中的定义：
>
> - get请求比较适合从服务器端获取数据
> - post请求比较适合向服务端提交数据

| 分类             | GET                                                          | POST                                                         |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 后退/刷新按钮    | 无害                                                         | 数据会被重新提交（浏览器会告知数据被重新提交）               |
| 书签             | 可收藏                                                       | 不可收藏为书签                                               |
| 缓存             | 能被缓存                                                     | 不能缓存                                                     |
| 编码类型         | application/x-wwww-form-uriencoded                           | application/x-wwww-form-urlencoded 或 multipart/form-data。为二进制的数据使用多重编码 |
| 历史             | 参数保留在浏览器历史中                                       | 参数不会保存在浏览器的历史记录中                             |
| 对数据的长度     | 发送数据时，GET方法向URL中添加数据，URL的最大长度为2048个字符 | 无限制                                                       |
| 对数据类型的限制 | 只允许ASCII字符                                              | 没有限制，也可以允许二进制的数据                             |
| 可见性           | 数据在url中对所有人可见                                      | 数据不会显示在url中                                          |
| 安全性           | 所发送的数据是url中一部分，安全性差于POST，敏感数据不要使用GET请求 | POST比GET更安全。因为他的参数不会保存到浏览器的历史记录或者是web服务器日志中 |

GET和POST的选择时机：

> - get请求适合从服务器端获取数据，如果想获取数据，建议使用
> - post请求适合向服务端提交数据，如果想提交数据，建议使用post
> - **大部分的form表单，都是post方式，因为form表单中要填写大量的数据，这些数据都是收集用户信息的，一般是需要传给服务器的，服务器将这些数据保存或者修改等**
>   - 如果有敏感信息，建议使用post请求，
> - 做文件上传一定是post请求，要传的数据不是纯文本

安全性：

> - get请求是绝对安全的，因为get请求只从服务器端获取数据。不会堆服务器造成威胁
> - post请求时危险的，post为了提交数据，如果数据以后门的方式进入了服务器，此时的服务器是比较危险的。post是提交数据，所以一般情况下会拦截（监听）post请求，
>
> ***在该使用的时候用get，不要用错，正常使用的情况下，get是绝对安全的。***

## 缓存机制

get请求时，浏览器做的事情是现在本地浏览器缓存中去找，找不到的时候再从服务器端获取，这种缓存的机制是为了提高用户体验

post请求之后，不会缓存，post主要用来提交数据，这和缓存没有意义

- 不希望get请求缓存，从本地浏览器缓存中找资源
  - 只要每一次get请求的路径不相同即可
  - 可以在路径后面加上一个每时每刻都在变化的时间戳
  - ```http://localhost:8080/httpservlet/getServlet?time=5534535662524```

